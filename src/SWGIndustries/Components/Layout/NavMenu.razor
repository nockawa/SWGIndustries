@using Microsoft.AspNetCore.Http
@using SWGIndustries.Services
@inject IHttpContextAccessor HttpContextAccessor
@inject UserService UserService

<AuthorizeView>
    <MudNavMenu Class="mud-width-full" Color="Color.Inherit">
        <MudNavLink Href="/" Icon="@Icons.Material.Filled.Warehouse" IconColor="Color.Inherit">Home</MudNavLink>
        <MudNavLink Href="SWGAccounts" Icon="@Icons.Material.Filled.ManageAccounts" IconColor="Color.Inherit">SWG Accounts</MudNavLink>
        <MudNavLink Href="Crew" Icon="@Icons.Material.Filled.People" IconColor="Color.Inherit">Crew</MudNavLink>
        <MudNavGroup Title="Buildings" Icon="@Icons.Material.Filled.Home" IconColor="Color.Inherit">
            <MudNavLink Href="Buildings/Inventory" Icon="@Icons.Material.Filled.Inventory" IconColor="Color.Inherit">Inventory</MudNavLink>
            <MudNavLink Href="Buildings/House" Icon="@Icons.Material.Filled.House" IconColor="Color.Inherit">Houses</MudNavLink>
            <MudNavLink Href="Buildings/Factory" Icon="@Icons.Material.Filled.Factory" IconColor="Color.Inherit">Factories</MudNavLink>
            <MudNavLink Href="Buildings/Harvester" Icon="@Icons.Material.Filled.Volcano" IconColor="Color.Inherit">Harvesters</MudNavLink>
        </MudNavGroup>
    </MudNavMenu>
</AuthorizeView>
@code {

    private UserInfo _info;

    protected override async Task OnInitializedAsync()
    {
        //Don't attempt to query if the user isn't authenticated.
        if (HttpContextAccessor.HttpContext!.User.Identity!.IsAuthenticated)
        {
            _info = await UserService.GetUserInfo();
        }
    }
}
